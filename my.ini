# /my.ini

# ==============================================================================
#  项目配套的 MySQL 数据库配置文件 (my.ini)
# ==============================================================================
#
#  重要提示：
#  1. 此文件为推荐配置，旨在确保项目与数据库的兼容性和性能。
#  2. 在部署时，请将此文件内容覆盖或合并到您的 MySQL 服务器的实际 `my.ini` 或 `my.cnf` 文件中。
#  3. 请务必根据您服务器的实际情况修改 `basedir` 和 `datadir` 路径。
#  4. 请务必找到您电脑上真实的配置文件生效位置，通常命令行运行mysql --help可找到配置文件生效位置优先级，但是如果安装的时候在高级设置中设定了配置生效目录就只能在指定目录生效，建议先用全局搜索工具如everything找到原有的配置文件
# ==============================================================================


[mysqld]
# --------------------
#  核心配置
# --------------------

# 关闭二进制日志，在开发或非主从复制环境中可以节省磁盘空间并略微提升性能。
log-bin = off

# MySQL 服务器监听的端口号。
port = 3306

# [!!必须修改!!] 设置 MySQL 的安装根目录。
# 示例: basedir = E:\mysql-8.0
basedir = C:\Program Files\MySQL\MySQL Server 8.0\

# [!!必须修改!!] 设置 MySQL 数据库文件（如 .ibd, .frm 文件）的存放目录。
datadir = C:\ProgramData\MySQL\MySQL Server 8.0\Data\


# --------------------
#  字符集与引擎配置
# --------------------

# 设置服务器默认字符集为 utf8，对于正确处理中文字符至关重要，可防止乱码。
character-set-server = utf8

# 设置默认的数据库存储引擎为 InnoDB，支持事务和行级锁定。
default-storage-engine = INNODB

# 针对 MySQL 8.0+ 的配置，使用传统的密码验证插件，以兼容旧版客户端或驱动。
default_authentication_plugin = mysql_native_password


# --------------------
#  性能与连接配置
# --------------------

# 避免外部锁定，提高性能。
skip-external-locking

# InnoDB 事务日志刷新策略。0 表示每秒写入并刷新到磁盘，性能较高但断电可能丢失最后一秒事务。
innodb_flush_log_at_trx_commit = 0

# 最大并发连接数。
max_connections = 1000

# 读操作缓冲区大小。
read_buffer_size = 4M

# 随机读缓冲区大小。
read_rnd_buffer_size = 4M

# 允许的最大数据包大小，防止因传输大数据（如BLOB）时出错。
max_allowed_packet = 4M

# 最大连接错误次数，超过此数值后会阻止该主机连接。
max_connect_errors = 10000

# InnoDB 日志文件大小。
innodb_log_file_size = 2G

# InnoDB 日志缓冲区大小。
innodb_log_buffer_size = 4M

# [重要性能参数] InnoDB 缓冲池大小，建议设置为物理内存的 50%-70%。这是最重要的性能调优参数之一。
innodb_buffer_pool_size = 4G

# [安全与数据导入] 允许安全文件操作的路径。设置为空字符串意味着取消限制，
# 允许在任何目录下执行 LOAD DATA INFILE 等操作，方便数据导入但有安全风险。
secure_file_priv = ''


[client]
# --------------------
#  客户端配置
# --------------------

# 客户端连接时默认使用的端口号，应与 [mysqld] 中的 port 一致。
port = 3306